#!/usr/bin/env bash

set -euo pipefail

PROJECT_ROOT="$(cd "$(dirname "$0")"/.. && pwd)"

rm -rf "$PROJECT_ROOT/game/dist/game" || true
rm -rf "$PROJECT_ROOT/client/dist" || true
rm -rf "$PROJECT_ROOT/pkg/server/static/site" || true

# Also remove common temporary outputs under assets
rm -rf "$PROJECT_ROOT/assets/dist" || true
rm -rf "$PROJECT_ROOT/assets/output" || true
rm -f "$PROJECT_ROOT/assets/.index.source" || true
rm -f "$PROJECT_ROOT/assets/.index.json" || true

# Cache for emscripten, pip, go, and gopath persists across runs, only remove if you want to
# re-build the assets
# rm -rf "$PROJECT_ROOT/.emscripten-cache" || true
# rm -rf "$PROJECT_ROOT/.pip-cache" || true
# rm -rf "$PROJECT_ROOT/.go-cache" || true
# rm -rf "$PROJECT_ROOT/.gopath" || true
# chmod -R +w "$PROJECT_ROOT/.home" || true # Allow removal of .home
# rm -rf "$PROJECT_ROOT/.home" || true

# Cache for downloaded assets persists across runs, only remove if you want to
# re-download all assets
# rm -rf "$PROJECT_ROOT/assets/cache" || true

echo "Cleaned generated outputs."
